{
  "feature": "classifier",
  "attempt": 2,
  "timestamp": "2026-02-18T19:45:33.352084",
  "decision": "FAIL",
  "reason": "Ensemble hurts: DA delta=-3.06pp, Sharpe=0.83",
  "standalone_assessment": {
    "balanced_accuracy": 0.5168819729888432,
    "balanced_accuracy_passed": false,
    "down_recall": 0.4230769230769231,
    "down_recall_passed": true,
    "down_precision": 0.4301675977653631,
    "down_precision_passed": false,
    "f1_down": 0.4265927977839335,
    "f1_down_passed": true,
    "mcc": 0.03385244833277535,
    "mcc_passed": true,
    "p_down_std": 0.18814660608768463,
    "non_trivial": true,
    "overfitting": {
      "train_mcc": 0.7964500582101413,
      "val_mcc": -0.001749988943697693,
      "test_mcc": 0.03385244833277535,
      "severity": "SEVERE",
      "overfit_ratio": 23.52710357551989
    },
    "standalone_criteria_met": "3/5"
  },
  "regression_model": {
    "test_da": 0.5917030567685589,
    "test_hcda": 0.6666666666666666,
    "test_sharpe": 2.047935815121427,
    "test_mae": 0.957062542814786,
    "positive_pct": 1.0,
    "optuna_best_params": {
      "max_depth": 2,
      "min_child_weight": 23,
      "subsample": 0.7922886046920369,
      "colsample_bytree": 0.6280531590851726,
      "reg_lambda": 2.9917454566803503,
      "reg_alpha": 0.9768087128450659,
      "learning_rate": 0.029448241970745824,
      "n_estimators": 728
    }
  },
  "ensemble_evaluation": {
    "best_threshold": 0.68,
    "threshold_logic": "if P(DOWN) > 0.68 then override to DOWN, else follow regression sign",
    "test_set": {
      "regression_da": 0.5917030567685589,
      "ensemble_da": 0.5611353711790393,
      "da_delta_pp": -3.056768558951961,
      "regression_sharpe": 2.047935815121427,
      "ensemble_sharpe": 0.8323802098420775,
      "sharpe_delta": -1.2155556052793495,
      "regression_down_capture": 0.0,
      "ensemble_down_capture": 0.0855614973262032,
      "regression_up_capture": 1.0,
      "ensemble_up_capture": 0.8892988929889298,
      "n_down_predicted_ensemble": 46,
      "n_down_predicted_regression": 0
    },
    "criteria_met": "1/5"
  },
  "threshold_scan_results": [
    {
      "threshold": 0.4,
      "val_da": 0.5197368421052632,
      "val_sharpe": -1.285882029352097,
      "val_down_cap": 0.5944700460829493,
      "val_up_cap": 0.45188284518828453,
      "n_down_pred": 260,
      "objective": -1.2760136082994653
    },
    {
      "threshold": 0.41,
      "val_da": 0.5175438596491229,
      "val_sharpe": -1.3338574882029082,
      "val_down_cap": 0.5668202764976958,
      "val_up_cap": 0.47280334728033474,
      "n_down_pred": 249,
      "objective": -1.3250855583783467
    },
    {
      "threshold": 0.42,
      "val_da": 0.5175438596491229,
      "val_sharpe": -1.49165467379675,
      "val_down_cap": 0.5345622119815668,
      "val_up_cap": 0.502092050209205,
      "n_down_pred": 235,
      "objective": -1.4828827439721886
    },
    {
      "threshold": 0.43,
      "val_da": 0.5197368421052632,
      "val_sharpe": -1.454017329625524,
      "val_down_cap": 0.5207373271889401,
      "val_up_cap": 0.5188284518828452,
      "n_down_pred": 228,
      "objective": -1.4441489085728925
    },
    {
      "threshold": 0.44,
      "val_da": 0.5263157894736842,
      "val_sharpe": -1.22932442488732,
      "val_down_cap": 0.511520737327189,
      "val_up_cap": 0.5397489539748954,
      "n_down_pred": 221,
      "objective": -1.216166530150478
    },
    {
      "threshold": 0.45,
      "val_da": 0.5285087719298246,
      "val_sharpe": -1.4184512234048254,
      "val_down_cap": 0.4930875576036866,
      "val_up_cap": 0.5606694560669456,
      "n_down_pred": 212,
      "objective": -1.4041968374399132
    },
    {
      "threshold": 0.46,
      "val_da": 0.5263157894736842,
      "val_sharpe": -1.2005216366883824,
      "val_down_cap": 0.45622119815668205,
      "val_up_cap": 0.5899581589958159,
      "n_down_pred": 197,
      "objective": -1.1873637419515404
    },
    {
      "threshold": 0.47,
      "val_da": 0.5328947368421053,
      "val_sharpe": -1.238385220034191,
      "val_down_cap": 0.4377880184331797,
      "val_up_cap": 0.6192468619246861,
      "n_down_pred": 186,
      "objective": -1.2219378516131383
    },
    {
      "threshold": 0.48,
      "val_da": 0.5175438596491229,
      "val_sharpe": -1.6649152833151286,
      "val_down_cap": 0.4009216589861751,
      "val_up_cap": 0.6234309623430963,
      "n_down_pred": 177,
      "objective": -1.6561433534905672
    },
    {
      "threshold": 0.49,
      "val_da": 0.5219298245614035,
      "val_sharpe": -1.4615355747729117,
      "val_down_cap": 0.3824884792626728,
      "val_up_cap": 0.6485355648535565,
      "n_down_pred": 167,
      "objective": -1.45057066249221
    },
    {
      "threshold": 0.5,
      "val_da": 0.5175438596491229,
      "val_sharpe": -1.0260601124136381,
      "val_down_cap": 0.3456221198156682,
      "val_up_cap": 0.6736401673640168,
      "n_down_pred": 153,
      "objective": -1.0172881825890767
    },
    {
      "threshold": 0.51,
      "val_da": 0.5109649122807017,
      "val_sharpe": -1.0510986986206223,
      "val_down_cap": 0.31797235023041476,
      "val_up_cap": 0.6861924686192469,
      "n_down_pred": 144,
      "objective": -1.0456162424802715
    },
    {
      "threshold": 0.52,
      "val_da": 0.5153508771929824,
      "val_sharpe": -0.9698952850989734,
      "val_down_cap": 0.31336405529953915,
      "val_up_cap": 0.698744769874477,
      "n_down_pred": 140,
      "objective": -0.9622198465024822
    },
    {
      "threshold": 0.53,
      "val_da": 0.5175438596491229,
      "val_sharpe": -0.676342256883452,
      "val_down_cap": 0.2995391705069124,
      "val_up_cap": 0.7154811715481172,
      "n_down_pred": 133,
      "objective": -0.6675703270588905
    },
    {
      "threshold": 0.54,
      "val_da": 0.5109649122807017,
      "val_sharpe": -0.9825731890169723,
      "val_down_cap": 0.2672811059907834,
      "val_up_cap": 0.7322175732217573,
      "n_down_pred": 122,
      "objective": -0.9770907328766214
    },
    {
      "threshold": 0.55,
      "val_da": 0.506578947368421,
      "val_sharpe": -0.946426410371621,
      "val_down_cap": 0.2488479262672811,
      "val_up_cap": 0.7405857740585774,
      "n_down_pred": 116,
      "objective": -0.9431369366874105
    },
    {
      "threshold": 0.56,
      "val_da": 0.5153508771929824,
      "val_sharpe": -0.7487585895037823,
      "val_down_cap": 0.23963133640552994,
      "val_up_cap": 0.7656903765690377,
      "n_down_pred": 108,
      "objective": -0.741083150907291
    },
    {
      "threshold": 0.57,
      "val_da": 0.5175438596491229,
      "val_sharpe": -0.6167749508342992,
      "val_down_cap": 0.22580645161290322,
      "val_up_cap": 0.7824267782426778,
      "n_down_pred": 101,
      "objective": -0.6080030210097378
    },
    {
      "threshold": 0.58,
      "val_da": 0.5109649122807017,
      "val_sharpe": -0.679469699894113,
      "val_down_cap": 0.1935483870967742,
      "val_up_cap": 0.799163179916318,
      "n_down_pred": 90,
      "objective": -0.6739872437537622
    },
    {
      "threshold": 0.59,
      "val_da": 0.5175438596491229,
      "val_sharpe": -0.537238295940025,
      "val_down_cap": 0.1889400921658986,
      "val_up_cap": 0.8158995815899581,
      "n_down_pred": 85,
      "objective": -0.5284663661154636
    },
    {
      "threshold": 0.6,
      "val_da": 0.5263157894736842,
      "val_sharpe": -0.27940012116746527,
      "val_down_cap": 0.18433179723502305,
      "val_up_cap": 0.8368200836820083,
      "n_down_pred": 79,
      "objective": -0.2662422264306232
    },
    {
      "threshold": 0.61,
      "val_da": 0.5241228070175439,
      "val_sharpe": -0.1961513610869763,
      "val_down_cap": 0.17511520737327188,
      "val_up_cap": 0.8410041841004184,
      "n_down_pred": 76,
      "objective": -0.18408995757820437
    },
    {
      "threshold": 0.62,
      "val_da": 0.5307017543859649,
      "val_sharpe": 0.13526428846018032,
      "val_down_cap": 0.16129032258064516,
      "val_up_cap": 0.8661087866108786,
      "n_down_pred": 67,
      "objective": 0.15061516565316277
    },
    {
      "threshold": 0.63,
      "val_da": 0.5328947368421053,
      "val_sharpe": 0.1594324209289734,
      "val_down_cap": 0.16129032258064516,
      "val_up_cap": 0.8702928870292888,
      "n_down_pred": 66,
      "objective": 0.17587978935002604
    },
    {
      "threshold": 0.64,
      "val_da": 0.5394736842105263,
      "val_sharpe": 0.38371534460290296,
      "val_down_cap": 0.15207373271889402,
      "val_up_cap": 0.891213389121339,
      "n_down_pred": 59,
      "objective": 0.4034521867081661
    },
    {
      "threshold": 0.65,
      "val_da": 0.5460526315789473,
      "val_sharpe": 0.7477937945511053,
      "val_down_cap": 0.14285714285714285,
      "val_up_cap": 0.9121338912133892,
      "n_down_pred": 52,
      "objective": 0.770820110340579
    },
    {
      "threshold": 0.66,
      "val_da": 0.5504385964912281,
      "val_sharpe": 0.8575128962568891,
      "val_down_cap": 0.1336405529953917,
      "val_up_cap": 0.9288702928870293,
      "n_down_pred": 46,
      "objective": 0.8827321945025031
    },
    {
      "threshold": 0.67,
      "val_da": 0.5526315789473685,
      "val_sharpe": 0.85525551386407,
      "val_down_cap": 0.12442396313364056,
      "val_up_cap": 0.9414225941422594,
      "n_down_pred": 41,
      "objective": 0.8815713033377541
    },
    {
      "threshold": 0.68,
      "val_da": 0.5504385964912281,
      "val_sharpe": 1.0024138616150446,
      "val_down_cap": 0.10599078341013825,
      "val_up_cap": 0.9539748953974896,
      "n_down_pred": 34,
      "objective": 1.0276331598606587
    },
    {
      "threshold": 0.69,
      "val_da": 0.5482456140350878,
      "val_sharpe": 0.9783532353362051,
      "val_down_cap": 0.10138248847926268,
      "val_up_cap": 0.9539748953974896,
      "n_down_pred": 33,
      "objective": 1.002476042353749
    },
    {
      "threshold": 0.7,
      "val_da": 0.5416666666666666,
      "val_sharpe": 0.9636889976912535,
      "val_down_cap": 0.08755760368663594,
      "val_up_cap": 0.9539748953974896,
      "n_down_pred": 30,
      "objective": 0.9845223310245867
    }
  ],
  "ytd_2026": {
    "n_days": 32,
    "regression_da": 0.6875,
    "ensemble_da": 0.5625,
    "da_delta_pp": -12.5,
    "actual_down_days": 10,
    "reg_down_captured": 0,
    "ens_down_captured": 0,
    "actual_up_days": 22,
    "reg_up_captured": 22,
    "ens_up_captured": 18,
    "reg_strategy_return": 0.15939029267575433,
    "ens_strategy_return": 0.017196977197487917
  }
}