# 評価サマリー: meta_model attempt 9

## Gate 1: 単体品質 -- FAIL

- 過学習比: N/A (テスト > 学習: -7.08pp) (閾値 < 10.0pp) PASS
- 全NaN列: 0個 PASS
- 定数出力列: 予測std=0.0006 (attempt 7の37.7分の1) FAIL
- 予測崩壊: 100%陽性予測 (TP=269, FP=189, TN=0, FN=0) FAIL
- HPOカバレッジ: 100トライアル (Track A: 60, Track B: 40) PASS
- デュアルトラック: Track A (MSE) composite=0.6412, Track B (方向性) composite=0.6137 -- 方向性損失は効果なし FAIL
- 交互作用特徴: real_rate_x_temporal Rank 3/27 (有効), 他2つは最下位 (25位, 27位) 一部有効

## Gate 2: Attempt 7との比較 -- FAIL (全指標で劣化)

| 指標 | Attempt 7 | Attempt 9 | 差分 | 判定 |
|------|-----------|-----------|------|------|
| DA | 60.04% | 58.73% | -1.31pp | FAIL |
| HCDA | 64.13% | 64.13% | 0.00pp | 名目上同等だが予測幅9.4倍縮小で信頼性低い |
| MAE | 0.9429% | 0.9425% | -0.0004 | 差なし (共に不合格、免除) |
| Sharpe | 2.46 | 2.06 | -0.40 | FAIL |
| vs Naive | +1.31pp | +0.00pp | -1.31pp | CRITICAL FAIL |
| 予測std | 0.0226 | 0.0006 | 37.7倍縮小 | FAIL |
| 陰性予測数 | 58 | 0 | -58 | FAIL |

## Gate 3: 最終目標値 -- 名目3/4合格、実質0/4合格

| 指標 | 目標 | 実績 | 判定 (名目) | 判定 (実質) |
|------|------|------|------------|------------|
| 方向精度 (DA) | > 56% | 58.73% | PASS | FAIL (naive同等) |
| 高確信DA (HCDA) | > 60% | 64.13% | PASS | FAIL (予測幅0.0048で意味なし) |
| MAE | < 0.75% | 0.9425% | FAIL | FAIL (免除) |
| Sharpe | > 0.80 | 2.06 | PASS | FAIL (常時ロング效果) |

## 失敗診断

**根本原因**: Attempt 8と同一の失敗モード -- 100%陽性予測への崩壊

**メカニズム**: Optunaの重み変更 (Sharpe 40->30%, DA 30->40%) と27特徴量空間の組み合わせが、常時陽性予測を最適解とするHP構成に収束した。予測のstd=0.0006は事実上の定数出力。

**2回連続失敗のパターン**:
- Attempt 8: スタッキング (3 GBDT + Ridge) -- Ridge過正則化で定数出力
- Attempt 9: 単一XGBoost + 交互作用 + 方向性損失 -- HP空間の収束で定数出力
- 異なるアーキテクチャで同一の失敗 = データ/テスト期間の構造的問題

## デュアルトラック実験結果

| トラック | Composite | Val DA | Val Sharpe | 結果 |
|---------|-----------|--------|------------|------|
| Track A (MSE, 60トライアル) | 0.6412 | 52.53% | 1.07 | 選択 |
| Track B (方向性損失, 40トライアル) | 0.6137 | 52.53% | 1.07 | 不採用 |

方向性損失関数は改善に寄与せず。両トラックが同一のval_DA (52.53%) とval_Sharpe (1.07) を発見した。

## 交互作用特徴量の評価

| 特徴量 | ランク | 重要度 | 評価 |
|--------|--------|--------|------|
| real_rate_x_temporal | 3/27 | 0.0571 | TOP-3に入り有効 |
| yc_curvature_x_recession | 25/27 | 0.0306 | ノイズ (下位3位) |
| dxy_x_vix_persistence | 27/27 | 0.0298 | ノイズ (最下位) |

1/3の交互作用特徴量のみ有効。残り2つは27特徴量中の最下位近辺。

## Attempt 10 実施の推奨判断: 不推奨

**理由**:
1. 2回連続 (attempt 8, 9) で attempt 7から劣化。同一の失敗モード (100%陽性予測)
2. 異なるアーキテクチャ (スタッキング vs 単一XGBoost + 修正) が同一結果 = 構造的限界
3. Attempt 7の3/4目標達成は genuineなスキルに基づく (naive超え+1.31pp)
4. Attempt 10の成功確率 < 15%, 同一失敗の確率 > 70%
5. 時間とリソースのROIが極めて低い

## 判定: no_further_improvement

**最終モデル**: Attempt 7 (DA=60.04%, HCDA=64.13%, Sharpe=2.46, 3/4目標達成)

Attempt 7は以下の点でプロジェクト全体のベスト:
- 全9回のメタモデル試行中で最高DA、最高HCDA、最高Sharpe
- naive戦略を初めて上回った唯一のattempt (+1.31pp)
- 過学習なし (テストDAが学習DAを上回る: -5.28ppギャップ)
- temporal_contextサブモデルがRank 3 (5.78%重要度) で新サブモデルの価値を実証

**改善試行のまとめ**:

| Attempt | 変更内容 | 結果 | DA vs Att 7 |
|---------|---------|------|-------------|
| 7 (best) | 24特徴量 + 単一XGB + OLS + Bootstrap | 3/4合格, naive超え | 基準 |
| 8 | スタッキング + バイナリ特徴量6個 | 名目3/4, 実質0/4 | -1.31pp |
| 9 | 単一XGB + 交互作用3個 + 方向性損失 | 名目3/4, 実質0/4 | -1.31pp |

3回の改善予算のうち2回を使用し、両方とも劣化。残り1回 (attempt 10) の実施は不推奨。
Attempt 7を最終モデルとして確定することを推奨。
