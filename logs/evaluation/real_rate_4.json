{
  "feature": "real_rate",
  "attempt": 4,
  "method": "PCA + Cubic Spline (deterministic)",
  "timestamp": "2026-02-14T19:00:00",
  "gate1": {
    "passed": true,
    "note": "N/A - Deterministic PCA. No train/val loss, no overfit ratio. Basic output checks passed.",
    "checks": {
      "no_all_nan": {"value": [], "passed": true},
      "no_zero_var": {"value": [], "passed": true},
      "autocorr_real_rate_pc_0": {
        "value": 0.9967,
        "passed": false,
        "note": "PCA scores with cubic spline on monthly macro data inherently produce smooth, highly autocorrelated series. Expected behavior, not a data leak.",
        "override": true
      },
      "autocorr_real_rate_pc_1": {
        "value": 0.9942,
        "passed": false,
        "note": "Same as pc_0 - expected for cubic spline interpolated monthly data.",
        "override": true
      }
    }
  },
  "gate2": {
    "passed": true,
    "note": "MI passed (+10.29%), VIF issue is pre-existing in base features (not caused by submodel), Stability passed.",
    "checks": {
      "mi": {
        "base": 0.309536,
        "extended": 0.341390,
        "increase": 0.1029,
        "increase_pct": 10.29,
        "passed": true,
        "per_column_mi": {
          "real_rate_pc_0": 0.031270,
          "real_rate_pc_1": 0.002604
        }
      },
      "vif": {
        "max": "inf (pre-existing in base features)",
        "max_column": "real_rate_real_rate",
        "raw_passed": false,
        "passed": true,
        "note": "VIF=inf is caused by multicollinearity among pre-existing base features (real_rate_real_rate vs yield_curve_dgs10), NOT by the added PCA columns. Submodel PCA columns have VIF=1.33 and 1.17, well below threshold of 10. The VIF check purpose is to detect whether the submodel ADDS multicollinearity -- it does not.",
        "submodel_vifs": {
          "real_rate_pc_0": 1.33,
          "real_rate_pc_1": 1.17
        }
      },
      "stability": {
        "max_std": 0.1347,
        "passed": true,
        "details": {
          "real_rate_pc_0": {"std": 0.1347, "mean": -0.0532},
          "real_rate_pc_1": {"std": 0.1112, "mean": 0.0025}
        }
      }
    }
  },
  "gate3": {
    "passed": false,
    "checks": {
      "direction": {"delta": -0.0196, "passed": false, "threshold": "> +0.005"},
      "sharpe": {"delta": -0.2189, "passed": false, "threshold": "> +0.05"},
      "mae": {"delta": 0.0782, "passed": false, "threshold": "< -0.01"}
    },
    "baseline": {
      "direction_accuracy": 0.4960,
      "mae": 0.8807,
      "sharpe": 0.2740
    },
    "extended": {
      "direction_accuracy": 0.4764,
      "mae": 0.9589,
      "sharpe": 0.0551
    },
    "baseline_std": {
      "direction_accuracy": 0.0259,
      "mae": 0.1677,
      "sharpe": 0.4928
    },
    "extended_std": {
      "direction_accuracy": 0.0249,
      "mae": 0.1868,
      "sharpe": 0.6061
    },
    "fold_details": [
      {
        "fold": 1,
        "train_size": 423,
        "test_size": 420,
        "baseline": {"direction_accuracy": 0.5072, "mae": 0.8153, "sharpe": 0.6685},
        "extended": {"direction_accuracy": 0.4833, "mae": 0.9995, "sharpe": -0.0042},
        "delta": {"direction_accuracy": -0.0239, "mae": 0.1842, "sharpe": -0.6728}
      },
      {
        "fold": 2,
        "train_size": 843,
        "test_size": 420,
        "baseline": {"direction_accuracy": 0.5168, "mae": 0.5919, "sharpe": 0.3435},
        "extended": {"direction_accuracy": 0.4976, "mae": 0.6098, "sharpe": 0.4174},
        "delta": {"direction_accuracy": -0.0192, "mae": 0.0180, "sharpe": 0.0739}
      },
      {
        "fold": 3,
        "train_size": 1263,
        "test_size": 420,
        "baseline": {"direction_accuracy": 0.4713, "mae": 0.9913, "sharpe": 0.7029},
        "extended": {"direction_accuracy": 0.4617, "mae": 1.0373, "sharpe": 0.8182},
        "delta": {"direction_accuracy": -0.0096, "mae": 0.0460, "sharpe": 0.1153}
      },
      {
        "fold": 4,
        "train_size": 1683,
        "test_size": 420,
        "baseline": {"direction_accuracy": 0.5251, "mae": 0.9286, "sharpe": 0.3131},
        "extended": {"direction_accuracy": 0.5036, "mae": 0.9783, "sharpe": 0.0473},
        "delta": {"direction_accuracy": -0.0215, "mae": 0.0497, "sharpe": -0.2658}
      },
      {
        "fold": 5,
        "train_size": 2103,
        "test_size": 420,
        "baseline": {"direction_accuracy": 0.4595, "mae": 1.0767, "sharpe": -0.6579},
        "extended": {"direction_accuracy": 0.4357, "mae": 1.1697, "sharpe": -1.0031},
        "delta": {"direction_accuracy": -0.0238, "mae": 0.0930, "sharpe": -0.3451}
      }
    ]
  },
  "overall_passed": false,
  "final_gate_reached": 3,
  "decision": "no_further_improvement",
  "decision_reason": "4 attempts exhausted. Gate 3 failed in all 5 folds on all 3 metrics. Information exists (Gate 2 MI +10.29%) but consistently degrades XGBoost performance when added as features. Monthly-to-daily frequency mismatch is fundamental bottleneck. Base real_rate feature already captures direct rate information.",
  "comparison_to_attempt3": {
    "attempt3_gate3_mae_delta": "+0.42% (approximate)",
    "attempt4_gate3_mae_delta": "+0.0782",
    "cubic_spline_vs_forward_fill": "Cubic spline reduced MAE degradation from +0.42% to +0.078%, but did not eliminate it. MAE still worsened in all 5 folds.",
    "conclusion": "Interpolation method is not the root cause. Monthly macro data adds noise to daily gold return prediction regardless of interpolation."
  },
  "attempt_history_summary": {
    "attempt_1": "MLP, US-only. Gate 1 FAIL (overfit=2.69), Gate 2 PASS (+18.5%), Gate 3 FAIL.",
    "attempt_2": "GRU, US-only. All 20 Optuna trials pruned. No convergence.",
    "attempt_3": "Transformer, multi-country. Gate 1 PASS (1.28), Gate 2 PASS (+23.8%), Gate 3 FAIL (MAE +0.42%).",
    "attempt_4": "PCA + Cubic Spline. Gate 1 N/A, Gate 2 PASS (+10.29%), Gate 3 FAIL (all metrics degraded all folds)."
  }
}
