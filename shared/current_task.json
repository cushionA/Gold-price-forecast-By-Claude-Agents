{
  "task_type": "meta_model",
  "feature": "meta_model",
  "attempt": 1,
  "phase": "phase3_meta_model",
  "objective": "Build and optimize the final meta-model that integrates base features + 7 submodel outputs to predict next-day gold return (%).",

  "inputs": {
    "base_features": "data/processed/base_features.csv",
    "submodel_outputs": [
      "data/submodel_outputs/vix.csv",
      "data/submodel_outputs/technical.csv",
      "data/submodel_outputs/cross_asset.csv",
      "data/submodel_outputs/yield_curve.csv",
      "data/submodel_outputs/etf_flow.csv",
      "data/submodel_outputs/inflation_expectation.csv",
      "data/submodel_outputs/cny_demand.csv"
    ],
    "excluded_submodels": [
      "real_rate",
      "dxy"
    ],
    "target": "data/processed/target.csv",
    "baseline_metrics": {
      "test_mae": 0.7139,
      "test_direction_accuracy": 0.4354,
      "test_sharpe_ratio": -1.696
    }
  },

  "constraints": {
    "train_val_test_split": "70/15/15 (time-series order)",
    "no_shuffle": true,
    "no_future_leakage": true,
    "transaction_cost": "5bps per trade (one-way)",
    "max_attempts": 5,
    "hp_optimization": "Optuna with 50 trials minimum"
  },

  "targets": {
    "direction_accuracy": "> 56%",
    "high_confidence_direction_accuracy": "> 60%",
    "mae": "< 0.75%",
    "sharpe_ratio": "> 0.8 (after costs)",
    "priority": "All targets must be achieved simultaneously"
  },

  "key_considerations": [
    "Submodel outputs have varying quality: technical (MAE -0.18), etf_flow (Sharpe +0.38), vix (Sharpe +0.29) are strong contributors",
    "cny_demand has DA degradation -2.06% and Sharpe -0.59 - monitor closely, consider ablation",
    "etf_flow has VIF warning (etf_regime_prob VIF=12.47) - monitor multicollinearity",
    "yield_curve only has 2 columns (yc_regime_prob excluded due to constant)",
    "Base features already captured in baseline (test DA=43.5%, MAE=0.71) - submodels must add incremental value",
    "Information gain from submodels: MI increases range from 0.09% (cny) to 21.97% (technical)",
    "Total feature count: 9 base + ~19 submodel outputs = ~28 features (manageable for XGBoost/TabNet/FT-Transformer)"
  ],

  "research_questions": [
    "What is the optimal meta-model architecture for integrating heterogeneous submodel outputs (HMM regime probabilities, z-scores, continuous states)?",
    "Should we use ensemble methods (stacking) or single unified model?",
    "How to handle VIF warnings (etf_regime_prob) and quality warnings (cny_demand)?",
    "Should cny_demand features be included or excluded based on Gate 3 degradation patterns?",
    "What HP search space is optimal for 28-feature input with time-series structure?",
    "How to balance all 4 target metrics (DA, HC-DA, MAE, Sharpe) simultaneously?"
  ],

  "expected_artifacts": [
    "docs/research/meta_model_attempt_1.md",
    "docs/design/meta_model_attempt_1.md",
    "data/processed/meta_model_input.csv (merged base + submodel outputs)",
    "notebooks/meta_model_1/train.ipynb (Kaggle training script)",
    "logs/evaluation/meta_model_attempt_1_summary.md"
  ],

  "success_criteria": "Test set must achieve ALL of: DA > 56%, HC-DA > 60%, MAE < 0.75%, Sharpe > 0.8. Gate 3 ablation is NOT required for meta-model (final evaluation only).",

  "created_at": "2026-02-15T19:30:00",
  "created_by": "orchestrator"
}
