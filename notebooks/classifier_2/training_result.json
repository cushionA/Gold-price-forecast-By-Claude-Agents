{
  "feature": "classifier",
  "attempt": 2,
  "timestamp": "2026-02-18T03:02:42.467080",
  "architecture": "XGBoost binary:logistic (MCC-optimized)",
  "n_features": 17,
  "features": [
    "rv_ratio_10_30",
    "rv_ratio_10_30_z",
    "gvz_level_z",
    "gvz_vix_ratio",
    "intraday_range_ratio",
    "risk_off_score",
    "gold_silver_ratio_change",
    "equity_gold_beta_20d",
    "gold_copper_ratio_change",
    "rate_surprise_signed",
    "dxy_acceleration",
    "gld_volume_z",
    "volume_return_sign",
    "momentum_divergence",
    "distance_from_20d_high",
    "day_of_week",
    "month_of_year"
  ],
  "best_params": {
    "max_depth": 5,
    "min_child_weight": 8,
    "subsample": 0.7853135777068502,
    "colsample_bytree": 0.7382675016367001,
    "reg_lambda": 0.1735267050192851,
    "reg_alpha": 0.004436047811836245,
    "learning_rate": 0.12334960139650958,
    "n_estimators": 400,
    "scale_pos_weight": 1.329060360350905
  },
  "optuna_trials_completed": 100,
  "optuna_valid_trials": 66,
  "optuna_rejected_trials": 34,
  "optuna_best_value": 0.1350728544410306,
  "objective_function": "MCC + 0.2*(AUC-0.5)",
  "trivial_guards": {
    "min_pred_std": 0.03,
    "min_minority_pct": 0.15,
    "reject_negative_mcc": true
  },
  "changes_from_attempt_1": [
    "Objective: F1_DOWN composite -> MCC + 0.2*AUC",
    "Trivial guard: reject if pred_std < 0.03 or minority_pct < 15%",
    "HP bounds relaxed: LR [0.01,0.15], reg_lambda [0.1,3.0]",
    "Early stopping: logloss -> auc",
    "scale_pos_weight: [0.8,1.5] -> [0.9,2.0]",
    "Dropped rate_surprise (unsigned), 18->17 features",
    "Removed focal loss option"
  ],
  "standalone_metrics": {
    "train": {
      "balanced_acc": 0.8908474038398715,
      "down_recall": 0.805168986083499,
      "down_precision": 0.9700598802395209,
      "f1_down": 0.8799565453557849,
      "up_recall": 0.9765258215962441,
      "up_precision": 0.8414239482200647,
      "mcc": 0.7964500582101413,
      "roc_auc": 0.9761776757296596
    },
    "val": {
      "balanced_acc": 0.49916603950125094,
      "down_recall": 0.3459715639810427,
      "down_precision": 0.474025974025974,
      "f1_down": 0.4,
      "up_recall": 0.6523605150214592,
      "up_precision": 0.5241379310344828,
      "mcc": -0.001749988943697693,
      "roc_auc": 0.5083090942375363
    },
    "test": {
      "balanced_acc": 0.5168819729888432,
      "down_recall": 0.4230769230769231,
      "down_precision": 0.4301675977653631,
      "f1_down": 0.4265927977839335,
      "up_recall": 0.6106870229007634,
      "up_precision": 0.6037735849056604,
      "mcc": 0.03385244833277535,
      "roc_auc": 0.5424251321197886
    }
  },
  "ensemble_metrics": {
    "optimal_threshold": 0.55,
    "note": "Full ensemble evaluation pending"
  },
  "class_balance": {
    "train_up_pct": 51.424432641236116,
    "train_down_pct": 48.575567358763884,
    "val_up_pct": 52.47747747747748,
    "val_down_pct": 47.52252252252252,
    "test_up_pct": 59.009009009009006,
    "test_down_pct": 40.990990990990994
  },
  "p_down_distribution": {
    "mean": 0.4425067901611328,
    "std": 0.18814660608768463,
    "min": 0.03777831792831421,
    "max": 0.9324170351028442
  },
  "data_info": {
    "train_samples": 2071,
    "val_samples": 444,
    "test_samples": 444,
    "full_samples": 2959,
    "train_date_range": "2014-05-12 00:00:00 to 2022-08-04 00:00:00",
    "val_date_range": "2022-08-05 00:00:00 to 2024-05-10 00:00:00",
    "test_date_range": "2024-05-13 00:00:00 to 2026-02-17 00:00:00"
  },
  "feature_importance": {
    "ranked": [
      {
        "feature": "rate_surprise_signed",
        "gain_pct": 6.5669502288693815
      },
      {
        "feature": "intraday_range_ratio",
        "gain_pct": 6.379844033443138
      },
      {
        "feature": "gold_copper_ratio_change",
        "gain_pct": 6.360687510313791
      },
      {
        "feature": "gvz_level_z",
        "gain_pct": 6.297195532659498
      },
      {
        "feature": "distance_from_20d_high",
        "gain_pct": 6.034573388011782
      },
      {
        "feature": "volume_return_sign",
        "gain_pct": 5.951207820421124
      },
      {
        "feature": "momentum_divergence",
        "gain_pct": 5.947883941808194
      },
      {
        "feature": "gvz_vix_ratio",
        "gain_pct": 5.926844820525206
      },
      {
        "feature": "risk_off_score",
        "gain_pct": 5.925282043696622
      },
      {
        "feature": "rv_ratio_10_30",
        "gain_pct": 5.789976778232177
      },
      {
        "feature": "equity_gold_beta_20d",
        "gain_pct": 5.725459823854564
      },
      {
        "feature": "gold_silver_ratio_change",
        "gain_pct": 5.682806855816185
      },
      {
        "feature": "rv_ratio_10_30_z",
        "gain_pct": 5.6522326518252575
      },
      {
        "feature": "dxy_acceleration",
        "gain_pct": 5.616721764476048
      },
      {
        "feature": "gld_volume_z",
        "gain_pct": 5.596637938175167
      },
      {
        "feature": "day_of_week",
        "gain_pct": 5.492551283915264
      },
      {
        "feature": "month_of_year",
        "gain_pct": 5.0531435839566
      }
    ],
    "top5": [
      "rate_surprise_signed",
      "intraday_range_ratio",
      "gold_copper_ratio_change",
      "gvz_level_z",
      "distance_from_20d_high"
    ],
    "bottom3": [
      "gld_volume_z",
      "day_of_week",
      "month_of_year"
    ]
  }
}